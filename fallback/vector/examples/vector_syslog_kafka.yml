---
sources:
  haproxy_src:
    type: "syslog"
    address: "0.0.0.0:514"
    max_length: 102400
    mode: "udp"
    path: "/dev/log"

transforms:
  haproxy_transform:
    type: "json_parser"
    inputs:
      - haproxy_src
    drop_invalid: true
    drop_field: true
    field: message

sinks:
  haproxy_sink:
    type: kafka
    inputs:
      - haproxy_transform
    bootstrap_servers: "{{ kafka_bootstrap_servers }}"
    topic: haproxy
    compression: none
    encoding:
      codec: json
    healthcheck: true